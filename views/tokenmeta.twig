{% extends '/subblocks/main.twig' %}

{% block body %}
{% include '/subblocks/menu.twig' %}



<div class="container-full" style="margin-top:25px;">
	<div class="container mh">
		<div class="col-lg-12 col-12">
			<div class="box">
				<div class="box-header with-border">
					<h4 class="box-title">Meta Details</h4>
				</div>
				<div class="box-body">
					<div class="table-responsive">
						<table class="table no-margin table-hover">
							<thead>
								<tr>
									<th scope="col">TX ID</th>
									<th scope="col">Block ID</th>
									<th scope="col">Block Height</th>
									<th scope="col">Poster Address</th>
									<th scope="col">Timestamp</th>
									<th scope="col">MetaName</th>
									<th scope="col">MetaData</th>
									<th scope="col">Chunk</th>
									<th scope="col">Void</th>
								</tr>
							</thead>
							<tbody id='metadetails'></tbody>
						</table>
					</div>
				</div>
			</div>
		</div>

	</div>
</div>
{% endblock %} {% block javascripts %}

<script type="text/javascript">

	$(document).ready(function () {

		var socket = io();

		socket.emit('gettokenmeta', { tokenid: '{{ tokenid }}' });
		socket.on('showtokenmeta', function (data) {

			var mainTable = document.getElementById("metadetails");
			var tr,
				td;

			data.forEach(function (row) {

				tr = document.createElement("tr");

				td = document.createElement("td");
				td.innerHTML = '<a href="/transaction/' + row.metatxid + '">' + row.metatxid.substr(0, 4) + '...' + row.metatxid.substr(-4) + '</a>';
				tr.appendChild(td);

				td = document.createElement("td");
				td.innerHTML = '<a href="/block/' + row.metablockid + '">' + row.metablockid.substr(0, 4) + '...' + row.metablockid.substr(-4) + '</a>';
				tr.appendChild(td);

				td = document.createElement("td");
				td.innerHTML = row.metablockheight;
				tr.appendChild(td);

				td = document.createElement("td");
				td.innerHTML = '<a href="/wallet/' + row.posteraddress + '">' + row.posteraddress.substr(0, 4) + '...' + row.posteraddress.substr(-4) + '</a>';
				tr.appendChild(td);

				td = document.createElement("td");
				td.innerHTML = row.timestamp;
				tr.appendChild(td);

				td = document.createElement("td");
				td.innerHTML = row.metaname;
				tr.appendChild(td);

				td = document.createElement("td");
				td.innerHTML = row.metadata;
				tr.appendChild(td);

				td = document.createElement("td");
				td.innerHTML = row.metachunk;
				tr.appendChild(td);

				td = document.createElement("td");
				td.innerHTML = row.void;
				tr.appendChild(td);

				metadetails.appendChild(tr);

			});
		});
	});
</script>


{% endblock %}
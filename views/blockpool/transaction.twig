{% extends '/blocks/submain.twig' %}

{% block body %}
{% include '/blocks/blockpoolsubmenu.twig' %}



<div class="container-full" style="margin-top:25px;">
	<div class="container">
		<section class="content">

			<div class="row">
				<div class="col-12">
					<div class="box">
						<div class="box-body">
							<div>

								<div class="row justify-content-between">
									<div class="col-md-auto">
										<h5><span id='sender'></span>
											<i class="fa fa-long-arrow-right text-success px-15"></i>
											<span id='recipient'></span>
										</h5>
									</div>
									<div class="col-md-auto">
										<h5 class="text-bold text-end"><span id='amount'></span> <strong>BPL</strong>
										</h5>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="col-lg-12 col-12">
					<div class="box">
						<div class="box-header with-border">
							<h4 class="box-title">Summary</h4>
						</div>
						<div class="box-body">
							<div class="table-responsive">
								<table class="table table-striped table-hover no-margin">
									<tbody>
										<tr>
											<td>Transaction ID</td>
											<td id='txid'> BPL</td>
										</tr>
										<tr>
											<td>Amount</td>
											<td id='amountsummary'> BPL</td>
										</tr>
										<tr>
											<td>Sender</td>
											<td id='senderto'></td>
										</tr>
										<tr>
											<td>Recipient</td>
											<td id='recipientto'></td>
										</tr>
										<tr>
											<td>Nonce</td>
											<td id='nonce'></td>
										</tr>
										<tr>
											<td>Timestamp</td>
											<td id='timestamp'></td>
										</tr>
										<tr>
											<td>Block ID</td>
											<td id='blockid'></td>
										</tr>
										<tr>
											<td>Confirmations</td>
											<td id='confirmations'></td>
										</tr>
									</tbody>
								</table>
							</div>
						</div>
					</div>
				</div>
			</div>
		</section>
	</div>
</div>
{% include '/cards/footer.twig' %}

{% endblock %}


{% block javascripts %}

<script type="text/javascript">

	$(document).ready(function () {

		var socket = io();

		socket.emit('blockpoolgettransactiondetails', { transactionId: '{{ transactionId }}' });
		socket.on('blockpoolshowtransactiondetails', function (data) {

			$('#sender').html('<a href="/blockpool/wallet/' + data.sender + '">' + data.sender + '</a>');
			$('#senderto').html('<a href="/blockpool/wallet/' + data.sender + '">' + data.sender + '</a>');
			$('#recipient').html('<a href="/blockpool/wallet/' + data.recipient + '">' + data.recipient + '</a>');
			$('#recipientto').html('<a href="/blockpool/wallet/' + data.recipient + '">' + data.recipient + '</a>');
			$('#txid').html('<a href="/blockpool/transaction/' + data.txid + '">' + data.txid + '</a>');
			$('#blockid').html('<a href="/blockpool/block/' + data.blockid + '">' + data.blockid + '</a>');
			$('#amount').html(parseFloat(data.amount) / 100000000).toFixed(0);
			$('#amountsummary').html(parseFloat(data.amountsummary) / 100000000).toFixed(0);
			$('#confirmations').html(data.confirmations);
			$('#fee').html(data.fee);
			$('#smartbridge').html(data.smartbridge);
			$('#timestamp').html(data.timestamp);
			$('#nonce').html(data.nonce);
		});

	});
</script>

<script>
	function goBack() {
		window.history.back();
	}
</script>
<script type="text/javascript">

	$(document).ready(function () {
		$("button-txid").click(function (event) {
			event.preventDefault();
			CopyToClipboard("{{ transactionId }}", true, "Value copied");
		});
	});

	function CopyToClipboard(value, showNotification, notificationText) {
		var $temp = $("<input>");
		$("body").append($temp);
		$temp.val(value).select();
		document.execCommand("copy");
		$temp.remove();

		if (typeof showNotification === 'undefined') {
			showNotification = true;
		}
		if (typeof notificationText === 'undefined') {
			notificationText = "Copied to clipboard";
		}

		var notificationTag = $("div.copy-notification");
		if (showNotification && notificationTag.length == 0) {
			notificationTag = $("<div/>", {
				"class": "copy-notification",
				text: notificationText
			});
			$("body").append(notificationTag);

			notificationTag.fadeIn("slow", function () {
				setTimeout(function () {
					notificationTag.fadeOut("slow", function () {
						notificationTag.remove();
					});
				}, 1000);
			});
		}
	}
</script>
{% endblock %}